<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Behaviors | XAML Behaviors for Avalonia </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Behaviors | XAML Behaviors for Avalonia ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/workgroupengineering/Xaml.Behaviors/blob/master/docfx/articles/interactivity/behaviors.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../images/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="behaviors">Behaviors</h1>

<p>Behaviors are reusable components that encapsulate functionality and can be attached to objects. They allow you to add behavior to controls without subclassing them or writing code-behind.</p>
<h2 id="using-behaviors">Using Behaviors</h2>
<p>Behaviors are attached to controls using the <code>Interaction.Behaviors</code> attached property. A control can have multiple behaviors attached to it.</p>
<pre><code class="lang-xml">&lt;TextBox Text=&quot;Hello&quot;&gt;
    &lt;Interaction.Behaviors&gt;
        &lt;SelectAllOnGotFocusBehavior /&gt;
    &lt;/Interaction.Behaviors&gt;
&lt;/TextBox&gt;
</code></pre>
<h2 id="creating-custom-behaviors">Creating Custom Behaviors</h2>
<p>To create a custom behavior, you typically inherit from <code>Behavior&lt;T&gt;</code> or <code>StyledElementBehavior&lt;T&gt;</code>, where <code>T</code> is the type of object the behavior can be attached to.</p>
<h3 id="behavior-vs-styledelementbehavior">Behavior vs. StyledElementBehavior</h3>
<ul>
<li><strong><code>Behavior&lt;T&gt;</code></strong>: Inherits from <code>AvaloniaObject</code>. It is the most basic behavior class. Use this if your behavior does not need to be part of the logical tree or share the <code>DataContext</code>.</li>
<li><strong><code>StyledElementBehavior&lt;T&gt;</code></strong>: Inherits from <code>StyledElement</code>. It supports <code>DataContext</code> synchronization and is attached to the logical tree. This is the recommended base class for most behaviors that interact with UI controls.</li>
</ul>
<h3 id="example-specific-behavior">Example: specific Behavior</h3>
<p>Here is an example of a simple behavior that logs a message when the associated button is clicked.</p>
<pre><code class="lang-csharp">using Avalonia.Controls;
using Avalonia.Interactivity;
using Avalonia.Xaml.Interactivity;

public class LogClickBehavior : Behavior&lt;Button&gt;
{
    protected override void OnAttached()
    {
        base.OnAttached();
        AssociatedObject.Click += OnClick;
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        AssociatedObject.Click -= OnClick;
    }

    private void OnClick(object? sender, RoutedEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine(&quot;Button clicked!&quot;);
    }
}
</code></pre>
<h3 id="example-styledelementbehavior">Example: StyledElementBehavior</h3>
<p>If your behavior needs to bind to properties in the <code>DataContext</code>, you should use <code>StyledElementBehavior</code>.</p>
<pre><code class="lang-csharp">using Avalonia;
using Avalonia.Controls;
using Avalonia.Xaml.Interactivity;

public class BindableBehavior : StyledElementBehavior&lt;Control&gt;
{
    public static readonly StyledProperty&lt;string&gt; MessageProperty =
        AvaloniaProperty.Register&lt;BindableBehavior, string&gt;(nameof(Message));

    public string Message
    {
        get =&gt; GetValue(MessageProperty);
        set =&gt; SetValue(MessageProperty, value);
    }

    protected override void OnAttached()
    {
        base.OnAttached();
        // ...
    }
}
</code></pre>
<h2 id="lifecycle">Lifecycle</h2>
<p>The lifecycle of a behavior is tightly coupled with the lifecycle of the object it is attached to. The <code>Interaction</code> class manages this relationship by subscribing to various events on the <code>AssociatedObject</code> and propagating them to the attached behaviors.</p>
<h3 id="why-is-this-needed">Why is this needed?</h3>
<p>In many cases, a behavior needs to perform actions not just when it is attached, but also when the associated object is loaded into the visual tree, when its data context changes, or when it is unloaded. Without these lifecycle methods, you would have to manually subscribe to these events in <code>OnAttached</code> and unsubscribe in <code>OnDetaching</code> for every single behavior. The <code>Behavior</code> base classes handle this plumbing for you, exposing protected virtual methods that you can override.</p>
<h3 id="how-it-works">How it works</h3>
<p>When you attach a behavior collection to a control, the <code>Interaction</code> class subscribes to relevant events on that control (like <code>AttachedToVisualTree</code>, <code>DetachedFromVisualTree</code>, <code>Loaded</code>, <code>Unloaded</code>, etc.). When these events fire, <code>Interaction</code> iterates through the behaviors in the collection and calls the corresponding lifecycle method on each behavior.</p>
<ul>
<li><strong><code>OnAttached</code></strong>: Called when the behavior is attached to an object. Use this method to subscribe to events or initialize the behavior.</li>
<li><strong><code>OnDetaching</code></strong>: Called when the behavior is detached from an object. Use this method to unsubscribe from events and clean up resources.</li>
</ul>
<h3 id="additional-lifecycle-methods">Additional Lifecycle Methods</h3>
<p>The following methods are available for override to handle specific events from the associated object:</p>
<ul>
<li><strong><code>OnAttachedToVisualTree</code></strong>: Called after the associated object is attached to the visual tree.</li>
<li><strong><code>OnDetachedFromVisualTree</code></strong>: Called when the associated object is being detached from the visual tree.</li>
<li><strong><code>OnAttachedToLogicalTree</code></strong>: Called after the associated object is attached to the logical tree.</li>
<li><strong><code>OnDetachedFromLogicalTree</code></strong>: Called when the associated object is being detached from the logical tree.</li>
<li><strong><code>OnLoaded</code></strong>: Called after the associated object is loaded.</li>
<li><strong><code>OnUnloaded</code></strong>: Called when the associated object is unloaded.</li>
<li><strong><code>OnInitializedEvent</code></strong>: Called when the associated object is initialized.</li>
<li><strong><code>OnDataContextChangedEvent</code></strong>: Called when the associated object's <code>DataContext</code> changes.</li>
<li><strong><code>OnResourcesChangedEvent</code></strong>: Called when the associated object's <code>Resources</code> change.</li>
<li><strong><code>OnActualThemeVariantChangedEvent</code></strong>: Called when the associated object's <code>ActualThemeVariant</code> changes.</li>
</ul>
<h2 id="enabling-and-disabling">Enabling and Disabling</h2>
<p>Behaviors have an <code>IsEnabled</code> property. When set to <code>false</code>, the behavior should disable its functionality. It is up to the behavior implementation to respect this property.</p>
<pre><code class="lang-csharp">public class MyBehavior : Behavior&lt;Control&gt;
{
    // ...

    private void OnSomeEvent(object sender, EventArgs e)
    {
        if (!IsEnabled) return;
        
        // Perform action
    }
}
</code></pre>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/workgroupengineering/Xaml.Behaviors/blob/master/docfx/articles/interactivity/behaviors.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
