<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Typed Async Trigger | XAML Behaviors for Avalonia </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Typed Async Trigger | XAML Behaviors for Avalonia ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      
      
      
      <meta name="docfx:docurl" content="https://github.com/workgroupengineering/Xaml.Behaviors/blob/master/docfx/articles/source-generators/typed-async-trigger.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../images/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="typed-async-trigger">Typed Async Trigger</h1>

<p>The <code>[GenerateAsyncTrigger]</code> attribute generates a trigger that reacts to <code>Task</code>/<code>ValueTask</code> properties without reflection or converter glue.</p>
<h2 id="usage">Usage</h2>
<pre><code class="lang-csharp">using System.Threading.Tasks;
using Xaml.Behaviors.SourceGenerators;

public partial class Loader
{
    [GenerateAsyncTrigger]
    public Task&lt;int&gt;? LoadTask { get; set; }
}
</code></pre>
<p>Generates <code>LoadTaskAsyncTrigger</code> with:</p>
<ul>
<li><code>LoadTask</code> styled property to bind a <code>Task</code>/<code>Task&lt;T&gt;</code>/<code>ValueTask</code>/<code>ValueTask&lt;T&gt;</code>.</li>
<li><code>IsExecuting</code>, <code>LastError</code>, and <code>LastResult</code> (for <code>T</code>) styled properties.</li>
<li>Executes actions when the task completes successfully, passing the result as the action parameter for <code>Task&lt;T&gt;/ValueTask&lt;T&gt;</code>; sets <code>LastError</code> on fault; cancellation stops tracking without firing actions.</li>
</ul>
<p><code>UseDispatcher</code> defaults to <code>true</code> for callbacks. <code>FireOnAttach</code> controls whether the current task is tracked when the trigger attaches (set it to <code>false</code> to wait for a new value). <code>Name</code> can override the generated class name. Assembly-level attributes use the same defaults, emit in the target type’s namespace, and prefix the type name to avoid collisions. When used at the assembly level, the <code>propertyName</code> argument can be an exact name, a <code>*</code> wildcard pattern, or a regex to generate triggers for multiple matching <code>Task</code>/<code>ValueTask</code> properties (an <code>XBG023</code> diagnostic is produced if nothing matches).</p>
<p><code>UseDispatcher</code>, <code>FireOnAttach</code>, and <code>Name</code> are compile-time attribute flags that bake behavior into the generated class; they are not exposed as styled properties on the trigger. Set them on the attribute rather than in XAML.</p>
<h3 id="xaml-example">XAML Example</h3>
<pre><code class="lang-xml">&lt;UserControl xmlns=&quot;https://github.com/avaloniaui&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
             xmlns:local=&quot;using:MyApp.ViewModels&quot;&gt;
  &lt;Grid&gt;
    &lt;Interaction.Behaviors&gt;
      &lt;local:LoadTaskAsyncTrigger LoadTask=&quot;{Binding LoadTask}&quot;&gt;
        &lt;local:SetStatusTextAction TargetObject=&quot;{Binding}&quot; Value=&quot;Loaded!&quot; /&gt;
      &lt;/local:LoadTaskAsyncTrigger&gt;
    &lt;/Interaction.Behaviors&gt;
    &lt;!-- UI content --&gt;
  &lt;/Grid&gt;
&lt;/UserControl&gt;
</code></pre>
<h2 id="diagnostics">Diagnostics</h2>
<ul>
<li><code>XBG023</code> when no Task/ValueTask property matching the name/pattern is found on the target type.</li>
<li><code>XBG025</code> when the property type is not Task/Task<t>/ValueTask/ValueTask<t>.</t></t></li>
<li>Generic/static members are rejected (<code>XBG008</code>/<code>XBG010</code>); accessibility issues report <code>XBG014</code>.</li>
</ul>
<h2 id="notes">Notes</h2>
<ul>
<li>Assembly-level attributes stay in the target type’s namespace and prefix the type name.</li>
<li>Collisions are disambiguated via hashed suffixes.</li>
<li><code>SourceObject</code> can be used to point the trigger at the owning object when the trigger property itself is not set (e.g., bind the trigger to the host control and let it read the task property from that source).</li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/workgroupengineering/Xaml.Behaviors/blob/master/docfx/articles/source-generators/typed-async-trigger.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
